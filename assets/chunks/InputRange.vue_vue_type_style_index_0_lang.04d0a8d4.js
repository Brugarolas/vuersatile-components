var B=Object.defineProperty;var I=(e,t,s)=>t in e?B(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s;var n=(e,t,s)=>(I(e,typeof t!="symbol"?t+"":t,s),s);import{d as x,_ as O,o as k,c as V,r as D,z as g,n as u,a1 as R,t as E,C as $}from"./framework.2ef82e6b.js";const L=x({name:"VueSliderDot",emits:["drag-start"],props:{value:{type:[String,Number],default:0},tooltip:{type:String,required:!0},tooltipPlacement:{type:String,validator:e=>["top","right","bottom","left"].indexOf(e)>-1,required:!0},tooltipFormatter:{type:[String,Function]},focus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},dotStyle:{type:Object},tooltipStyle:{type:Object}},computed:{dotClasses(){return["vue-slider-dot",{"vue-slider-dot-hover":this.tooltip==="hover"||this.tooltip==="active","vue-slider-dot-disabled":this.disabled,"vue-slider-dot-focus":this.focus}]},handleClasses(){return["vue-slider-dot-handle",{"vue-slider-dot-handle-disabled":this.disabled,"vue-slider-dot-handle-focus":this.focus}]},tooltipClasses(){return["vue-slider-dot-tooltip",[`vue-slider-dot-tooltip-${this.tooltipPlacement}`],{"vue-slider-dot-tooltip-show":this.showTooltip}]},tooltipInnerClasses(){return["vue-slider-dot-tooltip-inner",[`vue-slider-dot-tooltip-inner-${this.tooltipPlacement}`],{"vue-slider-dot-tooltip-inner-disabled":this.disabled,"vue-slider-dot-tooltip-inner-focus":this.focus}]},showTooltip(){switch(this.tooltip){case"always":return!0;case"none":return!1;case"focus":case"active":return!!this.focus;default:return!1}},tooltipValue(){return this.tooltipFormatter?typeof this.tooltipFormatter=="string"?this.tooltipFormatter.replace(/\{value\}/,String(this.value)):this.tooltipFormatter(this.value):this.value}},methods:{dragStart(){if(this.disabled)return!1;this.$emit("drag-start")}}}),j=["aria-valuetext"],z={class:"vue-slider-dot-tooltip-text"};function M(e,t,s,i,r,o){var a;return k(),V("div",{ref:"dot",class:u(e.dotClasses),"aria-valuetext":(a=e.tooltipValue)==null?void 0:a.toString(),onMousedownPassive:t[0]||(t[0]=(...d)=>e.dragStart&&e.dragStart(...d)),onTouchstartPassive:t[1]||(t[1]=(...d)=>e.dragStart&&e.dragStart(...d))},[D(e.$slots,"dot",{},()=>[g("div",{class:u(e.handleClasses),style:R(e.dotStyle)},null,6)]),e.tooltip!=="none"?(k(),V("div",{key:0,class:u(e.tooltipClasses)},[D(e.$slots,"tooltip",{},()=>[g("div",{class:u(e.tooltipInnerClasses),style:R(e.tooltipStyle)},[g("span",z,E(e.tooltipValue),1)],6)])],2)):$("",!0)],42,j)}const F=O(L,[["render",M]]);const H=x({name:"VueSliderMark",emits:["press-label"],props:{mark:{type:Object,required:!0},hideLabel:{type:Boolean},stepStyle:{type:Object,default:()=>({})},stepActiveStyle:{type:Object,default:()=>({})},labelStyle:{type:Object,default:()=>({})},labelActiveStyle:{type:Object,default:()=>({})}},computed:{marksClasses(){return["vue-slider-mark",{"vue-slider-mark-active":this.mark.active}]},stepClasses(){return["vue-slider-mark-step",{"vue-slider-mark-step-active":this.mark.active}]},labelClasses(){return["vue-slider-mark-label",{"vue-slider-mark-label-active":this.mark.active}]}},methods:{labelClickHandle(e){e.stopPropagation(),this.$emit("press-label",this.mark.pos)}}});function N(e,t,s,i,r,o){return k(),V("div",{class:u(e.marksClasses)},[D(e.$slots,"step",{},()=>[g("div",{class:u(e.stepClasses),style:R([e.stepStyle,e.mark.style||{},e.mark.active&&e.stepActiveStyle?e.stepActiveStyle:{},e.mark.active&&e.mark.activeStyle?e.mark.activeStyle:{}])},null,6)]),e.hideLabel?$("",!0):D(e.$slots,"label",{key:0},()=>[g("div",{class:u(e.labelClasses),style:R([e.labelStyle,e.mark.labelStyle||{},e.mark.active&&e.labelActiveStyle?e.labelActiveStyle:{},e.mark.active&&e.mark.labelActiveStyle?e.mark.labelActiveStyle:{}]),onClick:t[0]||(t[0]=(...a)=>e.labelClickHandle&&e.labelClickHandle(...a))},E(e.mark.label),7)])],2)}const T=O(H,[["render",N]]),p=e=>typeof e=="number"?`${e}px`:e,U=e=>{const t=document.documentElement,s=document.body,i=e.getBoundingClientRect();return{y:i.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||s.clientTop||0),x:i.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||s.clientLeft||0)}},W=(e,t,s,i=1)=>{const r="targetTouches"in e?e.targetTouches[0]:e,o=U(t),a={x:r.pageX-o.x,y:r.pageY-o.y};return{x:s?t.offsetWidth*i-a.x:a.x,y:s?t.offsetHeight*i-a.y:a.y}},K=(e,t)=>{if(t.hook){const s=t.hook(e);if(typeof s=="function")return s;if(!s)return null}switch(e.keyCode){case 38:return s=>t.direction==="ttb"?s-1:s+1;case 39:return s=>t.direction==="rtl"?s-1:s+1;case 40:return s=>t.direction==="ttb"?s+1:s-1;case 37:return s=>t.direction==="rtl"?s+1:s-1;case 35:return()=>t.max;case 36:return()=>t.min;case 33:return s=>s+10;case 34:return s=>s-10;default:return null}};class h{constructor(t){n(this,"num");this.num=t}decimal(t,s){const i=this.num,r=this.getDecimalLen(i),o=this.getDecimalLen(t);let a=0;switch(s){case"+":a=this.getExponent(r,o),this.num=(this.safeRoundUp(i,a)+this.safeRoundUp(t,a))/a;break;case"-":a=this.getExponent(r,o),this.num=(this.safeRoundUp(i,a)-this.safeRoundUp(t,a))/a;break;case"*":this.num=this.safeRoundUp(this.safeRoundUp(i,this.getExponent(r)),this.safeRoundUp(t,this.getExponent(o)))/this.getExponent(r+o);break;case"/":a=this.getExponent(r,o),this.num=this.safeRoundUp(i,a)/this.safeRoundUp(t,a);break;case"%":a=this.getExponent(r,o),this.num=this.safeRoundUp(i,a)%this.safeRoundUp(t,a)/a;break}return this}plus(t){return this.decimal(t,"+")}minus(t){return this.decimal(t,"-")}multiply(t){return this.decimal(t,"*")}divide(t){return this.decimal(t,"/")}remainder(t){return this.decimal(t,"%")}toNumber(){return this.num}getDecimalLen(t){const s=`${t}`.split("e");return(`${s[0]}`.split(".")[1]||"").length-(s[1]?+s[1]:0)}getExponent(t,s){return Math.pow(10,s!==void 0?Math.max(t,s):t)}safeRoundUp(t,s){return Math.round(t*s)}}const q={[1]:'The type of the "value" is illegal',[2]:'The prop "interval" is invalid, "(max - min)" must be divisible by "interval"',[3]:'The "value" must be greater than or equal to the "min".',[4]:'The "value" must be less than or equal to the "max".',[5]:'When "order" is false, the parameters "minRange", "maxRange", "fixed", "enabled" are invalid.'};class X{constructor(t){n(this,"dotsPos",[]);n(this,"dotsValue",[]);n(this,"data");n(this,"enableCross");n(this,"fixed");n(this,"max");n(this,"min");n(this,"interval");n(this,"minRange");n(this,"maxRange");n(this,"order");n(this,"marks");n(this,"included");n(this,"process");n(this,"adsorb");n(this,"dotOptions");n(this,"onError");n(this,"cacheRangeDir",{});this.data=t.data,this.max=t.max,this.min=t.min,this.interval=t.interval,this.order=t.order,this.marks=t.marks,this.included=t.included,this.process=t.process,this.adsorb=t.adsorb,this.dotOptions=t.dotOptions,this.onError=t.onError,this.order?(this.minRange=t.minRange||0,this.maxRange=t.maxRange||0,this.enableCross=t.enableCross,this.fixed=t.fixed):((t.minRange||t.maxRange||!t.enableCross||t.fixed)&&this.emitError(5),this.minRange=0,this.maxRange=0,this.enableCross=!0,this.fixed=!1),this.setValue(t.value)}setValue(t){this.setDotsValue(Array.isArray(t)?[...t]:[t],!0)}setDotsValue(t,s){this.dotsValue=t,s&&this.syncDotsPos()}setDotsPos(t){const s=this.order?[...t].sort((i,r)=>i-r):t;this.dotsPos=s,this.setDotsValue(s.map(i=>this.getValueByPos(i)),this.adsorb)}getValueByPos(t){let s=this.parsePos(t);if(this.included){let i=100;this.markList.forEach(r=>{const o=Math.abs(r.pos-t);o<i&&(i=o,s=r.value)})}return s}syncDotsPos(){this.dotsPos=this.dotsValue.map(t=>this.parseValue(t))}get markList(){if(!this.marks)return[];const t=(s,i)=>{const r=this.parseValue(s);return{pos:r,value:s,label:s,active:this.isActiveByPos(r),...i}};return this.marks===!0?this.getValues().map(s=>t(s)):Object.prototype.toString.call(this.marks)==="[object Object]"?Object.keys(this.marks).sort((s,i)=>+s-+i).map(s=>{const i=this.marks[s];return t(s,typeof i!="string"?i:{label:i})}):Array.isArray(this.marks)?this.marks.map(s=>t(s)):typeof this.marks=="function"?this.getValues().map(s=>({value:s,result:this.marks(s)})).filter(({result:s})=>!!s).map(({value:s,result:i})=>t(s,i)):[]}getRecentDot(t){const s=this.dotsPos.map(i=>Math.abs(i-t));return s.indexOf(Math.min(...s))}getIndexByValue(t){return this.data?this.data.indexOf(t):new h(+t).minus(this.min).divide(this.interval).toNumber()}getValueByIndex(t){return t<0?t=0:t>this.total&&(t=this.total),this.data?this.data[t]:new h(t).multiply(this.interval).plus(this.min).toNumber()}setDotPos(t,s){t=this.getValidPos(t,s).pos;const i=t-this.dotsPos[s];if(!i)return;let r=new Array(this.dotsPos.length);this.fixed?r=this.getFixedChangePosArr(i,s):this.minRange||this.maxRange?r=this.getLimitRangeChangePosArr(t,i,s):r[s]=i,this.setDotsPos(this.dotsPos.map((o,a)=>o+(r[a]||0)))}getFixedChangePosArr(t,s){return this.dotsPos.forEach((i,r)=>{if(r!==s){const{pos:o,inRange:a}=this.getValidPos(i+t,r);a||(t=Math.min(Math.abs(o-i),Math.abs(t))*(t<0?-1:1))}}),this.dotsPos.map(i=>t)}getLimitRangeChangePosArr(t,s,i){const r=[{index:i,changePos:s}],o=s;return[this.minRange,this.maxRange].forEach((a,d)=>{if(!a)return!1;const m=d===0,y=s>0;let b=0;m?b=y?1:-1:b=y?-1:1;const w=(v,C)=>{const A=Math.abs(v-C);return m?A<this.minRangeDir:A>this.maxRangeDir};let c=i+b,f=this.dotsPos[c],P=t;for(;this.isPos(f)&&w(f,P);){const{pos:v}=this.getValidPos(f+o,c);r.push({index:c,changePos:v-f}),c=c+b,P=v,f=this.dotsPos[c]}}),this.dotsPos.map((a,d)=>{const m=r.filter(y=>y.index===d);return m.length?m[0].changePos:0})}isPos(t){return typeof t=="number"}getValidPos(t,s){const i=this.valuePosRange[s];let r=!0;return t<i[0]?(t=i[0],r=!1):t>i[1]&&(t=i[1],r=!1),{pos:t,inRange:r}}parseValue(t){if(this.data)t=this.data.indexOf(t);else if(typeof t=="number"||typeof t=="string"){if(t=+t,t<this.min)return this.emitError(3),0;if(t>this.max)return this.emitError(4),0;if(typeof t!="number"||t!==t)return this.emitError(1),0;t=new h(t).minus(this.min).divide(this.interval).toNumber()}const s=new h(t).multiply(this.gap).toNumber();return s<0?0:s>100?100:s}parsePos(t){const s=Math.round(t/this.gap);return this.getValueByIndex(s)}isActiveByPos(t){return this.processArray.some(([s,i])=>t>=s&&t<=i)}getValues(){if(this.data)return this.data;{const t=[];for(let s=0;s<=this.total;s++)t.push(new h(s).multiply(this.interval).plus(this.min).toNumber());return t}}getRangeDir(t){return t?new h(t).divide(new h(this.data?this.data.length-1:this.max).minus(this.data?0:this.min).toNumber()).multiply(100).toNumber():100}emitError(t){this.onError&&this.onError(t,q[t])}get processArray(){if(this.process){if(typeof this.process=="function")return this.process(this.dotsPos);if(this.dotsPos.length===1)return[[0,this.dotsPos[0]]];if(this.dotsPos.length>1)return[[Math.min(...this.dotsPos),Math.max(...this.dotsPos)]]}return[]}get total(){let t=0;return this.data?t=this.data.length-1:t=new h(this.max).minus(this.min).divide(this.interval).toNumber(),t-Math.floor(t)!==0?(this.emitError(2),0):t}get gap(){return 100/this.total}get minRangeDir(){return this.cacheRangeDir[this.minRange]?this.cacheRangeDir[this.minRange]:this.cacheRangeDir[this.minRange]=this.getRangeDir(this.minRange)}get maxRangeDir(){return this.cacheRangeDir[this.maxRange]?this.cacheRangeDir[this.maxRange]:this.cacheRangeDir[this.maxRange]=this.getRangeDir(this.maxRange)}getDotRange(t,s,i){if(!this.dotOptions)return i;const r=Array.isArray(this.dotOptions)?this.dotOptions[t]:this.dotOptions;return r&&r[s]!==void 0?this.parseValue(r[s]):i}get valuePosRange(){const t=this.dotsPos,s=[];return t.forEach((i,r)=>{s.push([Math.max(this.minRange?this.minRangeDir*r:0,this.enableCross?0:t[r-1]||0,this.getDotRange(r,"min",0)),Math.min(this.minRange?100-this.minRangeDir*(t.length-1-r):100,this.enableCross?100:t[r+1]||100,this.getDotRange(r,"max",100))])}),s}get dotsIndex(){return this.dotsValue.map(t=>this.getIndexByValue(t))}}class Y{constructor(t){n(this,"map");n(this,"states",0);this.map=t}add(t){this.states|=t}delete(t){this.states&=~t}toggle(t){this.has(t)?this.delete(t):this.add(t)}has(t){return!!(this.states&t)}}const l={None:0,Drag:1<<1,Focus:1<<2},S=4,J=x({name:"VueSlider",components:{VueSliderDot:F,VueSliderMark:T},emits:["change","drag-start","dragging","drag-end","error","update:modelValue"],data(){return{control:null,states:new Y(l),scale:1,focusDotIndex:0}},props:{modelValue:{type:[Number,String,Array],default:0},silent:{type:Boolean,default:!1},direction:{type:String,default:"ltr",validator:e=>["ltr","rtl","ttb","btt"].indexOf(e)>-1},width:{type:[Number,String]},height:{type:[Number,String]},dotSize:{type:[Number,Array],default:14},contained:{type:Boolean,default:!1},min:{type:Number,default:0},max:{type:Number,default:100},interval:{type:Number,default:1},disabled:{type:Boolean,default:!1},clickable:{type:Boolean,default:!0},dragOnClick:{type:Boolean,default:!1},duration:{type:Number,default:.5},data:{type:[Object,Array]},dataValue:{type:String,default:"value"},dataLabel:{type:String,default:"label"},lazy:{type:Boolean,default:!1},tooltip:{type:String,default:"active",validator:e=>["none","always","focus","hover","active"].indexOf(e)>-1},tooltipPlacement:{type:[String,Array],validator:e=>(Array.isArray(e)?e:[e]).every(t=>["top","right","bottom","left"].indexOf(t)>-1)},tooltipFormatter:{type:[String,Array,Function]},useKeyboard:{type:Boolean,default:!0},keydownHook:{type:Function},enableCross:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},order:{type:Boolean,default:!0},minRange:{type:Number},maxRange:{type:Number},marks:{type:[Boolean,Object,Array,Function],default:!1},process:{type:[Boolean,Function],default:!0},zoom:{type:Number},included:{type:Boolean},adsorb:{type:Boolean},hideLabel:{type:Boolean},dotOptions:{type:[Object,Array]},dotAttrs:{type:Object},railStyle:{type:Object},processStyle:{type:Object},dotStyle:{type:Object},tooltipStyle:{type:Object},stepStyle:{type:Object},stepActiveStyle:{type:Object},labelStyle:{type:Object},labelActiveStyle:{type:Object}},computed:{isHorizontal(){return this.direction==="ltr"||this.direction==="rtl"},isReverse(){return this.direction==="rtl"||this.direction==="btt"},tailSize(){return p((this.isHorizontal?this.height:this.width)||S)},containerClasses(){return["vue-slider",[`vue-slider-${this.direction}`],{"vue-slider-disabled":this.disabled}]},containerStyles(){const[e,t]=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize],s=this.width?p(this.width):this.isHorizontal?"auto":p(S),i=this.height?p(this.height):this.isHorizontal?p(S):"auto";return{padding:this.contained?`${t/2}px ${e/2}px`:this.isHorizontal?`${t/2}px 0`:`0 ${e/2}px`,width:s,height:i}},processArray(){return this.control.processArray.map(([e,t,s],i)=>{e>t&&([e,t]=[t,e]);const r=this.isHorizontal?"width":"height";return{start:e,end:t,index:i,style:{[this.isHorizontal?"height":"width"]:"100%",[this.isHorizontal?"top":"left"]:0,[this.mainDirection]:`${e}%`,[r]:`${t-e}%`,transitionProperty:`${r},${this.mainDirection}`,transitionDuration:`${this.animateTime}s`,...this.processStyle,...s}}})},dotBaseStyle(){const[e,t]=Array.isArray(this.dotSize)?this.dotSize:[this.dotSize,this.dotSize];let s;return this.isHorizontal?s={transform:`translate(${this.isReverse?"50%":"-50%"}, -50%)`,WebkitTransform:`translate(${this.isReverse?"50%":"-50%"}, -50%)`,top:"50%",[this.direction==="ltr"?"left":"right"]:"0"}:s={transform:`translate(-50%, ${this.isReverse?"50%":"-50%"})`,WebkitTransform:`translate(-50%, ${this.isReverse?"50%":"-50%"})`,left:"50%",[this.direction==="btt"?"bottom":"top"]:"0"},{width:`${e}px`,height:`${t}px`,...s}},mainDirection(){switch(this.direction){case"ltr":return"left";case"rtl":return"right";case"btt":return"bottom";case"ttb":return"top";default:return"left"}},tooltipDirections(){const e=this.tooltipPlacement||(this.isHorizontal?"top":"left");return Array.isArray(e)?e:this.dots.map(()=>e)},dots(){return this.control.dotsPos.map((e,t)=>({pos:e,index:t,value:this.control.dotsValue[t],focus:this.states.has(l.Focus)&&this.focusDotIndex===t,disabled:this.disabled,style:this.dotStyle,...(Array.isArray(this.dotOptions)?this.dotOptions[t]:this.dotOptions)||{}}))},animateTime(){return this.states.has(l.Drag)?0:this.duration},canSort(){return this.order&&!this.minRange&&!this.maxRange&&!this.fixed&&this.enableCross},sliderData(){return this.isObjectArrayData(this.data)?this.data.map(e=>e[this.dataValue]):this.isObjectData(this.data)?Object.keys(this.data):this.data},sliderMarks(){return this.marks?this.marks:this.isObjectArrayData(this.data)?e=>{const t={label:e};return this.data.some(s=>s[this.dataValue]===e?(t.label=s[this.dataLabel],!0):!1),t}:this.isObjectData(this.data)?this.data:void 0},sliderTooltipFormatter(){if(this.tooltipFormatter)return this.tooltipFormatter;if(this.isObjectArrayData(this.data))return e=>{let t=""+e;return this.data.some(s=>s[this.dataValue]===e?(t=s[this.dataLabel],!0):!1),t};if(this.isObjectData(this.data)){const e=this.data;return t=>e[t]}else return},isNotSync(){const e=this.control.dotsValue;return Array.isArray(this.modelValue)?this.modelValue.length!==e.length||this.modelValue.some((t,s)=>t!==e[s]):this.modelValue!==e[0]},dragRange(){const e=this.dots[this.focusDotIndex-1],t=this.dots[this.focusDotIndex+1];return[e?e.pos:-1/0,t?t.pos:1/0]}},watch:{modelValue(){this.control&&!this.states.has(l.Drag)&&this.isNotSync&&this.control.setValue(this.modelValue)}},methods:{isObjectData(e){return!!e&&Object.prototype.toString.call(e)==="[object Object]"},isObjectArrayData(e){return!!e&&Array.isArray(e)&&e.length>0&&typeof e[0]=="object"},bindEvent(){document.addEventListener("touchmove",this.dragMove,{passive:!1}),document.addEventListener("touchend",this.dragEnd,{passive:!1}),document.addEventListener("mousedown",this.blurHandle),document.addEventListener("mousemove",this.dragMove),document.addEventListener("mouseup",this.dragEnd),document.addEventListener("mouseleave",this.dragEnd),document.addEventListener("keydown",this.keydownHandle)},unbindEvent(){document.removeEventListener("touchmove",this.dragMove),document.removeEventListener("touchend",this.dragEnd),document.removeEventListener("mousedown",this.blurHandle),document.removeEventListener("mousemove",this.dragMove),document.removeEventListener("mouseup",this.dragEnd),document.removeEventListener("mouseleave",this.dragEnd),document.removeEventListener("keydown",this.keydownHandle)},setScale(){this.scale=new h(Math.floor(this.isHorizontal?this.$el.offsetWidth:this.$el.offsetHeight)).multiply(this.zoom||1).divide(100).toNumber()},initControl(){this.control=new X({value:this.modelValue,data:this.sliderData,enableCross:this.enableCross,fixed:this.fixed,max:this.max,min:this.min,interval:this.interval,minRange:this.minRange,maxRange:this.maxRange,order:this.order,marks:this.sliderMarks,included:this.included,process:this.process,adsorb:this.adsorb,dotOptions:this.dotOptions,onError:this.emitError}),["data","enableCross","fixed","max","min","interval","minRange","maxRange","order","marks","process","adsorb","included","dotOptions"].forEach(e=>{this.$watch(e,t=>{if(e==="data"&&Array.isArray(this.control.data)&&Array.isArray(t)&&this.control.data.length===t.length&&t.every((s,i)=>s===this.control.data[i]))return!1;switch(e){case"data":case"dataLabel":case"dataValue":this.control.data=this.sliderData;break;case"mark":this.control.marks=this.sliderMarks;break;default:this.control[e]=t}["data","max","min","interval"].indexOf(e)>-1&&this.control.syncDotsPos()})})},syncValueByPos(){const e=this.control.dotsValue;if(this.isDiff(e,Array.isArray(this.modelValue)?this.modelValue:[this.modelValue])){const t=e.length===1?e[0]:[...e];this.$emit("change",t,this.focusDotIndex),this.$emit("update:modelValue",t)}},isDiff(e,t){return e.length!==t.length||e.some((s,i)=>s!==t[i])},emitError(e,t){this.silent||console.error(`[VueSlider error]: ${t}`),this.$emit("error",e,t)},dragStartOnProcess(e){if(this.dragOnClick){this.setScale();const t=this.getPosByEvent(e),s=this.control.getRecentDot(t);if(this.dots[s].disabled)return;this.dragStart(s),this.control.setDotPos(t,this.focusDotIndex),this.lazy||this.syncValueByPos()}},dragStart(e){this.focusDotIndex=e,this.setScale(),this.states.add(l.Drag),this.states.add(l.Focus),this.$emit("drag-start",this.focusDotIndex)},dragMove(e){if(!this.states.has(l.Drag))return!1;e.preventDefault();const t=this.getPosByEvent(e);this.isCrossDot(t),this.control.setDotPos(t,this.focusDotIndex),this.lazy||this.syncValueByPos();const s=this.control.dotsValue;this.$emit("dragging",s.length===1?s[0]:[...s],this.focusDotIndex)},isCrossDot(e){if(this.canSort){const t=this.focusDotIndex;let s=e;if(s>this.dragRange[1]?(s=this.dragRange[1],this.focusDotIndex++):s<this.dragRange[0]&&(s=this.dragRange[0],this.focusDotIndex--),t!==this.focusDotIndex){const i=this.$refs[`dot-${this.focusDotIndex}`];i&&i.$el&&i.$el.focus(),this.control.setDotPos(s,t)}}},dragEnd(e){if(!this.states.has(l.Drag))return!1;setTimeout(()=>{this.lazy&&this.syncValueByPos(),this.included&&this.isNotSync?this.control.setValue(this.modelValue):this.control.syncDotsPos(),this.states.delete(l.Drag),(!this.useKeyboard||"targetTouches"in e)&&this.states.delete(l.Focus),this.$emit("drag-end",this.focusDotIndex)})},blurHandle(e){if(!this.states.has(l.Focus)||!this.$refs.container||this.$refs.container.contains(e.target))return!1;this.states.delete(l.Focus)},clickHandle(e){if(!this.clickable||this.disabled)return!1;if(this.states.has(l.Drag))return;this.setScale();const t=this.getPosByEvent(e);this.setValueByPos(t)},focus(e,t=0){e.disabled||(this.states.add(l.Focus),this.focusDotIndex=t)},blur(){this.states.delete(l.Focus)},getValue(){const e=this.control.dotsValue;return e.length===1?e[0]:e},getIndex(){const e=this.control.dotsIndex;return e.length===1?e[0]:e},setValue(e){this.control.setValue(Array.isArray(e)?[...e]:[e]),this.syncValueByPos()},setIndex(e){const t=Array.isArray(e)?e.map(s=>this.control.getValueByIndex(s)):this.control.getValueByIndex(e);this.setValue(t)},setValueByPos(e){const t=this.control.getRecentDot(e);if(this.disabled||this.dots[t].disabled)return!1;this.focusDotIndex=t,this.control.setDotPos(e,t),this.syncValueByPos(),this.useKeyboard&&this.states.add(l.Focus),setTimeout(()=>{this.included&&this.isNotSync?this.control.setValue(this.modelValue):this.control.syncDotsPos()})},keydownHandle(e){if(!this.useKeyboard||!this.states.has(l.Focus))return!1;const t=this.included&&this.marks,s=K(e,{direction:this.direction,max:t?this.control.markList.length-1:this.control.total,min:0,hook:this.keydownHook});if(s){e.preventDefault();let i=-1,r=0;t?(this.control.markList.some((o,a)=>o.value===this.control.dotsValue[this.focusDotIndex]?(i=s(a),!0):!1),i<0?i=0:i>this.control.markList.length-1&&(i=this.control.markList.length-1),r=this.control.markList[i].pos):(i=s(this.control.getIndexByValue(this.control.dotsValue[this.focusDotIndex])),r=this.control.parseValue(this.control.getValueByIndex(i))),this.isCrossDot(r),this.control.setDotPos(r,this.focusDotIndex),this.syncValueByPos()}},getPosByEvent(e){return W(e,this.$el,this.isReverse,this.zoom)[this.isHorizontal?"x":"y"]/this.scale},renderSlot(e,t,s){const i=this.$slots[e];return i?i(t):s}},created(){this.initControl()},mounted(){this.bindEvent()},beforeUnmount(){this.unbindEvent()}});export{J as _};
