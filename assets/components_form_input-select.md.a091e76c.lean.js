import"./chunks/Icon.vue_vue_type_style_index_0_lang.4ed993c7.js";import{D as m,a7 as T,o as p,c as F,z as y,t as u,A as I,B as e,J as d,K as f,N as A,C,G as a,n as E,a1 as x,F as k,M as R,a4 as v,_ as V,V as c}from"./chunks/framework.2ef82e6b.js";import"./chunks/TextareaBase.vue_vue_type_style_index_0_lang.495c3f00.js";import{I as N}from"./chunks/InputBase.79a59676.js";import{R as K}from"./chunks/required-input.b2bb1158.js";import{B as P}from"./chunks/Button.b78049be.js";import{T as B}from"./chunks/TransitionHeight.42bf1ec8.js";import{T as j,D as L}from"./chunks/TransitionFadeSelect.d8a922df.js";import"./chunks/InputSelect.vue_vue_type_style_index_0_lang.4ed993c7.js";import{F as r}from"./chunks/Form.b01f29cf.js";import{C as i}from"./chunks/Card.9fdd6421.js";import"./chunks/index.ec15b88a.js";import"./chunks/Icon.14f47361.js";import"./chunks/basic-input.d1a3a2b5.js";import"./chunks/Form.vue_vue_type_style_index_0_lang.4ed993c7.js";import"./chunks/Card.vue_vue_type_style_index_0_lang.4ed993c7.js";const M=["data-field-name","data-options-state"],H={key:0,class:"input-select__label-wrapper"},W={class:"input-select__label-text"},G=["data-select-options"],z={key:0,class:"input-select__search-wrapper"},J={key:0,class:"input-select__search-actions"},U=["onClick","data-item"],Y={class:"input-select__list-item input-select__list-item--no-result"},Q={key:0,class:"input-select__error-message"};function X(s,l,o,_,h,n){const b=m("TransitionHeight"),g=m("InputBase"),q=m("Button"),O=m("TransitionFadeSelect"),w=T("click-outside");return p(),F("div",{class:E(["input-select",n.componentClass]),"data-field-name":s.name,"data-options-state":n.dataStateOptions,onKeydown:[l[2]||(l[2]=v((...t)=>n.close&&n.close(...t),["esc"])),l[3]||(l[3]=v((...t)=>n.selectFirstResult&&n.selectFirstResult(...t),["enter"]))]},[s.label||o.allowClear?(p(),F("div",H,[y("label",W,u(s.label),1),o.allowClear?(p(),I(b,{key:0},{default:e(()=>[d(y("button",{class:"input-select__label-clear-button",type:"button",onClick:l[0]||(l[0]=f((...t)=>n.clear&&n.clear(...t),["prevent"]))},u(s.$t("GENERIC.CLEAR")),513),[[A,n.showClearButton]])]),_:1})):C("",!0)])):C("",!0),d(a(g,{class:"input-select__list-wrapper",value:n.optionSelected[o.optionLabelKey],name:`${s.name}-input`,icon:"chevron-down",iconSize:"s",ref:"input",placeholder:n.placeholderMessage,disabled:s.disabled,allowReadOnly:!0,onIconClick:n.toggle,onClick:n.toggle},null,8,["value","name","placeholder","disabled","onIconClick","onClick"]),[[w,n.close]]),a(O,null,{default:e(()=>[d(y("ul",{class:E(["input-select__list",{"input-select__list--outside":s.mountOptionsOutside}]),ref:"selectOptions",style:x(s.dropdownStyle),"data-select-options":s.name},[o.allowSearch?(p(),F("li",z,[a(g,{class:"input-select__search-bar",value:h.search,name:"Search",icon:"magnifying-glass",placeholder:s.$t("GENERIC.SEARCH"),allowReadOnly:o.readOnly,onInput:n.inputSearch,onClick:l[1]||(l[1]=f(()=>{},["stop"]))},null,8,["value","placeholder","allowReadOnly","onInput"]),o.allowAddOptions?(p(),F("div",J,[a(q,{type:"secondary-transparent",text:s.$t("GENERIC.ADD"),disabled:!n.hasSearch,onClick:n.addOption},null,8,["text","disabled","onClick"])])):C("",!0)])):C("",!0),(p(!0),F(k,null,R(n.filteredOptions,(t,S)=>d((p(),F("li",{class:E(["input-select__list-item",{"input-select__list-item--selected":t.key===n.optionSelected.key,"input-select__list-item--empty":o.allowEmpty&&S===0}]),key:t.key,onClick:f(rs=>n.select(t[o.optionValueKey]),["stop"]),"data-item":`${s.name}-${S}`},[y("span",null,u(t[o.optionLabelKey]),1)],10,U)),[[A,n.searchHasResults]])),128)),d(y("li",Y,[y("span",null,u(s.$t("GENERIC.NO_RESULTS")),1)],512),[[A,!n.searchHasResults]])],14,G),[[A,h.isOpen]])]),_:1}),a(b,null,{default:e(()=>[s.shouldShowErrors?(p(),F("p",Q,u(n.errorMessage),1)):C("",!0)]),_:1})],42,M)}const Z={components:{Button:P,InputBase:N,TransitionHeight:B,TransitionFadeSelect:j},mixins:[K,L],props:{initialValue:{type:[Object,String,Number],default:null},options:{type:Array,default:()=>[]},optionValueKey:{type:String,default:"value"},optionLabelKey:{type:String,default:"text"},allowClear:{type:Boolean,default:!1},allowEmpty:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1},allowSearch:{type:Boolean,default:!1},allowAddOptions:{type:Boolean,default:!1},clearWhenDisable:{type:Boolean,default:!1},clearWhenOptionsChange:{type:Boolean,default:!1},placeholder:{type:String,default:null}},data(){return{isOpen:!1,value:null,search:null,extraOption:null}},computed:{componentClass(){return{"input-select--open":this.isOpen}},dataStateOptions(){return this.isOpen?"open":"closed"},hasSelected(){return!!this.value||this.value===0},hasSearch(){return!!this.searchFilter},placeholderMessage(){return this.hasSelected||this.allowEmpty?null:this.placeholder},isValid(){return this.disabled?!0:!this.required||this.allowEmpty||this.hasSelected},showClearButton(){return this.hasSelected&&this.allowClear&&!this.disabled},modificable(){return!this.readOnly&&!this.disabled},valueIsEmpty(){return!this.value&&this.value!==0},allowEmptySelection(){return this.placeholder&&this.allowEmpty},emptyOption(){return{[this.optionValueKey]:{id:null,text:null},[this.optionLabelKey]:this.placeholder,key:`empty_${this.name}`}},searchFilter(){var s;return((s=this.search)==null?void 0:s.trim())||""},selectableOptions(){const s=this.formatOptions();return this.allowEmptySelection&&s.unshift(this.emptyOption),this.allowAddOptions&&this.extraOption&&s.push(this.extraOption),s},filteredOptions(){if(!this.allowSearch||!this.searchFilter)return this.selectableOptions;const s=this.searchFilter.toLowerCase();return this.selectableOptions.filter(l=>l[this.optionLabelKey].toLowerCase().includes(s))},optionSelected(){if(this.allowEmptySelection&&this.valueIsEmpty)return this.emptyOption;if(this.valueIsEmpty)return{};const s=this.selectableOptions.find(l=>l[this.optionValueKey].id===this[this.optionValueKey].id);return!s&&!this.value?{}:s||{[this.optionValueKey]:this.value,[this.optionLabelKey]:this.value,key:this.value}},errorMessage(){if(this.shouldShowErrors)return this.$t("FORM.ERROR.NOT_EMPTY")},dropdownElements(){return{content:this.$refs.selectOptions,sibling:this.$refs.input}},searchHasResults(){var s;return!!((s=this.filteredOptions)!=null&&s.length)}},watch:{disabled:{handler(s){s&&this.clearWhenDisable&&(this.value=null)}},options:{handler(s){var l;this.clearWhenOptionsChange&&(((l=s==null?void 0:s.last())==null?void 0:l[this.optionLabelKey])===this.search?this.value=this.search:this.value=null)},deep:!0}},methods:{close(){this.isOpen=!1,this.search=null},inputSearch(s){this.search=s.target.value},formatOptions(){return this.options.map(l=>{const o=l[this.optionValueKey],_=l[this.optionLabelKey],h=this.getKeyFromValue(o);return{[this.optionValueKey]:o,[this.optionLabelKey]:_,key:h}})},shouldSetInitialValue(){return!!this.initialValue||this.initialValue===0},getKeyFromValue(s){return s==null?`empty_${this.name}`:typeof s!="object"?s:s._id||s.id?s._id||s.id:JSON.stringify(s)},toggle(s){s==null||s.stopPropagation(),s==null||s.preventDefault(),this.modificable&&(this.isOpen=!this.isOpen,this.allowSearch&&!this.isOpen&&(this.search=null),this.mountOptionsOutside&&this.isOpen&&this.mountElement())},clear(){this.dirty=!0,this.value=null,this.$emit("change",null)},select(s){if(this.value===s){this.close();return}this.dirty=!0,this.value=s,this.$emit("change",this.value),this.close()},selectFirstResult(){var l;if(!this.searchFilter||!((l=this.filteredOptions)!=null&&l.length))return;const s=this.filteredOptions[0];this.select(s.value)},addOption(){this.allowSearch&&(this.extraOption={[this.optionValueKey]:{id:`extra_${this.search}`,text:this.search},[this.optionLabelKey]:this.search,key:`extra_${this.search}`},this.value=this.search,this.$emit("click",this.search))}}},D=V(Z,[["render",X]]);const $=c("",5),ss=c("",9),ls=c("",4),as=c("",4),ns=c("",6),es=c("",4),os=c("",7),ts=c("",4),ps=c("",2),vs=JSON.parse('{"title":"InputSelect","description":"","frontmatter":{},"headers":[],"relativePath":"components/form/input-select.md","lastUpdated":1680998659000}'),cs={name:"components/form/input-select.md"},qs=Object.assign(cs,{setup(s){const l=[{value:{id:1,text:"WORKER"},text:"I'm a worker"},{value:{id:2,text:"FREELANCE"},text:"I'm a freelance"},{value:{id:3,text:"COMPANY"},text:"I'm a company"},{value:{id:4,text:"OTHER"},text:"None of the above"}];return(o,_)=>(p(),F("div",null,[$,a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(D,{name:"select",label:"Select an option",placeholder:"Select a job...",required:"",options:l})]),_:1})]),_:1}),ss,a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(D,{name:"select",label:"Select an option",placeholder:"Select a job...",required:"",allowClear:"",options:l})]),_:1})]),_:1}),ls,a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(D,{name:"select",label:"Select an option",placeholder:"Select a job...",allowEmpty:"",options:l})]),_:1})]),_:1}),as,a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(D,{name:"select",label:"Select an option",placeholder:"Select a job...",readOnly:"",options:l,initialValue:l[0].value},null,8,["initialValue"])]),_:1})]),_:1}),ns,a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(D,{name:"select",label:"Select an option",placeholder:"Select a job...",allowSearch:"",options:l})]),_:1})]),_:1}),es,a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(D,{name:"select",label:"Select an option",placeholder:"Select a job...",allowSearch:"",allowAddOptions:"",options:l})]),_:1})]),_:1}),os,a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(D,{name:"select",label:"Select an option",placeholder:"Select your current job status...",required:"",options:l})]),_:1})]),_:1}),ts,a(i,null,{default:e(()=>[a(r,null,{default:e(()=>[a(D,{name:"select",label:"Select an option",placeholder:"Select a job...",mountOptionsOutside:"",options:l})]),_:1})]),_:1}),ps]))}});export{vs as __pageData,qs as default};
